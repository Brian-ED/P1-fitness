outFile â† "output/main.c"
defaultFile â† "bqn-default-output.c"
saveFile â† "save_data"

typeâ€¿elm â† {
  data â† âŸ¨8â‹„64â€¿'f'âŸ©â€¢bit._Cast 256âŠ¸|âŒ¾(128âŠ¸+)@-Ëœâ€¢FBytes saveFile
  (âŠ‘Â¨â‹ˆ1âŠ¸â†“Â¨) (Â¯1â†‘Ëœ0=â‰ )âŠ¸âˆ¾Â¨ âˆ¾âŸœâˆâ¼Â¨+`âŠ¸-âˆ˜=âŸœâˆâŠ¸âŠ” data
}

outFile â€¢FCharsâŸœâ€¢FCharsâŸ(Â¬â€¢file.Existsâˆ˜âŠ£) defaultFile
cFChr â† â€¢FChars outFile

{
  fmtâ†âŸ¨
    "txywh" # buttons
    "txy"   # titles
    "" # index -1 is the invalid index
  âŸ©

  seach_terms â† âˆ¾âŸœ"*/"Â¨ "/*"âŠ¸âˆ¾Â¨ âˆ¾(typeâŠfmt)âˆ¾âŸœâ€¢ReprÂ¨Â¨<Â¨â†•â‰ elm
  amountsâ€¿spots â† (â‰ Â¨â‹ˆâˆ¾) /âˆ˜â·âŸœcFChrÂ¨seach_terms

  # Time for text replace!!
  flChars â† "eE.Â¯-Ï€âˆ"âˆ¾'0'+â†•10
  newCCode â† {
    (amounts/â€¢ReprÂ¨âˆ¾elm)âˆ¾Â¨Ëœ âˆ¨`âŒ¾âŒ½âˆ˜Â¬âˆ˜âˆŠâŸœflCharsâŠ¸/Â¨ ğ•©
  }âŒ¾(spotsâ‹âŠ¸âŠÂ¯1â†“(+` cFchrâ‰ âŠ¸â†‘/â¼spots)âŠ¸âŠ”) cFchr

  outFile â€¢FChars newCCode
}

# Old code for reading the floats from a c file
  #homeName â† âˆ¾('/'âŠËœÂ»âˆ˜Â«){ğ”½âŠ¸(â†‘â‹ˆğ”½âŠ¸â†‘âˆ˜â†“)}â€¢path
  #âŸ¨ToNumsâŸ©â†â€¢Import homeName â€¢file.At "bqn-libs/strings.bqn"
  # floatsAtSpots â† â¥Š(Â¬Â·âˆ§`âŒ¾âŒ½Ë˜Ë˜floatCharsâˆŠËœâŠ¢)âŠ¸({' 'Â¨âŒ¾(ğ•¨âŠ¸/)ğ•©}Ë˜Ë˜)âŒ½Ë˜Ë˜cFChrâŠËœspots-âŒœ1+â†•20
  # floatsAtSpots ({"Some floats invalid"!ğ•©â‰ âŠ¸â‰¡Ã—Â´ğ•¨}âŠ¢â¥Š)âŸœToNumsËœâ†©â‰¢spots
  # changed â† floatsAtSpotsâ‰ 1â†“ğ•—
